<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<meta name="dcterms.date" content="2025-01-22">

<title>R for Data Cleaning – Computing Basics and Intro to R</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../lessons/r-lessons/r-markdown.html" rel="next">
<link href="../../lessons/r-lessons/r-plotting.html" rel="prev">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../lessons/r-lessons/r-tidydata.html">R for Data Cleaning</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../../">Computing Basics and Intro to R</a> 
        <div class="sidebar-tools-main">
    <div class="dropdown">
      <a href="" title="" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label=""><i class="bi bi-github"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/SyracuseUniversity/ospo-workshop-r-intro">
            Source Code
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://github.com/SyracuseUniversity/ospo-workshop-r-intro/issues/new">
            Report a Bug
            </a>
          </li>
      </ul>
    </div>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/shell-intro/shell-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to the Unix Shell</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../../lessons/github/github-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><code>git</code> and GitHub</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/github/exercise1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 1: Practice with <code>git</code> on a local repository</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/github/exercise2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 2: Using <code>git pull</code> and <code>push</code> with GitHub</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/github/exercise3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Exercise 3: Collaborating in GitHub using the Fork and Pull Model</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/r-lessons/r-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Introduction to R and RStudio</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/r-lessons/r-plotting.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Plotting in R with ggplot2</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/r-lessons/r-tidydata.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">R for Data Cleaning</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../lessons/r-lessons/r-markdown.html" class="sidebar-item-text sidebar-link">

 <span class="menu-text">Writing reports with R Markdown</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link active" data-scroll-target="#getting-started">Getting Started</a></li>
  <li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data">Loading data</a></li>
  <li><a href="#wrangling-data-with-dplyr" id="toc-wrangling-data-with-dplyr" class="nav-link" data-scroll-target="#wrangling-data-with-dplyr">Wrangling data with <code>dplyr</code></a>
  <ul class="collapse">
  <li><a href="#selecting-columns" id="toc-selecting-columns" class="nav-link" data-scroll-target="#selecting-columns">Selecting columns</a></li>
  <li><a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns">Renaming columns</a></li>
  <li><a href="#creating-columns" id="toc-creating-columns" class="nav-link" data-scroll-target="#creating-columns">Creating columns</a></li>
  <li><a href="#filtering-rows" id="toc-filtering-rows" class="nav-link" data-scroll-target="#filtering-rows">Filtering rows</a></li>
  <li><a href="#ordering-rows" id="toc-ordering-rows" class="nav-link" data-scroll-target="#ordering-rows">Ordering rows</a></li>
  </ul></li>
  <li><a href="#summarizing-data" id="toc-summarizing-data" class="nav-link" data-scroll-target="#summarizing-data">Summarizing data</a>
  <ul class="collapse">
  <li><a href="#calculating-summary-statistics" id="toc-calculating-summary-statistics" class="nav-link" data-scroll-target="#calculating-summary-statistics">Calculating summary statistics</a></li>
  <li><a href="#recoding-variables" id="toc-recoding-variables" class="nav-link" data-scroll-target="#recoding-variables">Recoding variables</a></li>
  <li><a href="#missing-values" id="toc-missing-values" class="nav-link" data-scroll-target="#missing-values">Missing values</a></li>
  </ul></li>
  <li><a href="#overview" id="toc-overview" class="nav-link" data-scroll-target="#overview">Overview</a></li>
  <li><a href="#saving-and-exporting-cleaned-data" id="toc-saving-and-exporting-cleaned-data" class="nav-link" data-scroll-target="#saving-and-exporting-cleaned-data">Saving and exporting cleaned data</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/SyracuseUniversity/ospo-workshop-r-intro/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">R for Data Cleaning</h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">

      <p class="date">2025-01-22</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<table class="caption-top table">
<colgroup>
<col style="width: 48%">
<col style="width: 48%">
</colgroup>
<thead>
<tr class="header">
<th><h3 id="questions" class="anchored">Questions</h3></th>
<th><h3 id="objectives" class="anchored">Objectives</h3></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><ul>
<li>“How can R help make my research more reproducible?”</li>
<li>“How can data tidying facilitate answering analysis questions?”</li>
<li>“How can I summarize my data in R?”</li>
</ul></td>
<td><ul>
<li>“To become familiar with the functions of <code>dplyr</code> and the <code>tidyverse</code> suite of packages.”</li>
<li>“To use <code>dplyr</code> and the <code>tidyverse</code> packages to prepare data for analysis.”</li>
<li>“To be able to create summary tables to answer analysis questions.”</li>
</ul></td>
</tr>
</tbody>
</table>
<section id="getting-started" class="level1">
<h1>Getting Started</h1>
<p>The <a href="https://www.tidyverse.org/"><code>tidyverse</code></a> is a collection of packages that facilitates data analysis in R. After installing the <code>tidyverse</code> with <code>install.packages("tidyverse")</code> (see the <a href="../../lessons/r-lessons/r-intro.html">intro session</a>), you can load it with:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──
✔ dplyr     1.1.4     ✔ readr     2.1.5
✔ forcats   1.0.0     ✔ stringr   1.5.1
✔ ggplot2   3.5.1     ✔ tibble    3.2.1
✔ lubridate 1.9.4     ✔ tidyr     1.3.1
✔ purrr     1.0.2     
── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
✖ dplyr::filter() masks stats::filter()
✖ dplyr::lag()    masks stats::lag()
ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Upon loading, the <code>tidyverse</code> prints a message like the one above. Notice that multiple packages (the constituent elements of the “collection”) are actually loaded. For instance, <code>dplyr</code> and <code>tidyr</code> help with data wrangling and transformation, while <code>ggplot2</code> allows us to draw plots, as you saw in the <a href="../../lessons/r-lessons/r-plotting.html">last session</a>. Often, one just loads the <code>tidyverse</code> and ignores these details, as the individual packages are compatible with each other.</p>
</div>
</div>
<p>Throughout this module, we will use <code>tidyverse</code> functions to load, wrangle, and visualize real data.</p>
</section>
<section id="loading-data" class="level1">
<h1>Loading data</h1>
<p>As with the <a href="../../lessons/r-lessons/r-intro.html">intro session</a>, we’ll be using the palmer penguins dataset. First, let’s load the package, then save the raw data to an object using the assignment operator <code>&lt;-</code>. Finally, inspect the raw data that is included using <code>glimpse()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(palmerpenguins)</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="ot">&lt;-</span> penguins_raw</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(penguins_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 344
Columns: 17
$ studyName             &lt;chr&gt; "PAL0708", "PAL0708", "PAL0708", "PAL0708", "PAL…
$ `Sample Number`       &lt;dbl&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 1…
$ Species               &lt;chr&gt; "Adelie Penguin (Pygoscelis adeliae)", "Adelie P…
$ Region                &lt;chr&gt; "Anvers", "Anvers", "Anvers", "Anvers", "Anvers"…
$ Island                &lt;chr&gt; "Torgersen", "Torgersen", "Torgersen", "Torgerse…
$ Stage                 &lt;chr&gt; "Adult, 1 Egg Stage", "Adult, 1 Egg Stage", "Adu…
$ `Individual ID`       &lt;chr&gt; "N1A1", "N1A2", "N2A1", "N2A2", "N3A1", "N3A2", …
$ `Clutch Completion`   &lt;chr&gt; "Yes", "Yes", "Yes", "Yes", "Yes", "Yes", "No", …
$ `Date Egg`            &lt;date&gt; 2007-11-11, 2007-11-11, 2007-11-16, 2007-11-16,…
$ `Culmen Length (mm)`  &lt;dbl&gt; 39.1, 39.5, 40.3, NA, 36.7, 39.3, 38.9, 39.2, 34…
$ `Culmen Depth (mm)`   &lt;dbl&gt; 18.7, 17.4, 18.0, NA, 19.3, 20.6, 17.8, 19.6, 18…
$ `Flipper Length (mm)` &lt;dbl&gt; 181, 186, 195, NA, 193, 190, 181, 195, 193, 190,…
$ `Body Mass (g)`       &lt;dbl&gt; 3750, 3800, 3250, NA, 3450, 3650, 3625, 4675, 34…
$ Sex                   &lt;chr&gt; "MALE", "FEMALE", "FEMALE", NA, "FEMALE", "MALE"…
$ `Delta 15 N (o/oo)`   &lt;dbl&gt; NA, 8.94956, 8.36821, NA, 8.76651, 8.66496, 9.18…
$ `Delta 13 C (o/oo)`   &lt;dbl&gt; NA, -24.69454, -25.33302, NA, -25.32426, -25.298…
$ Comments              &lt;chr&gt; "Not enough blood for isotopes.", NA, NA, "Adult…</code></pre>
</div>
</div>
<p>We can inspect our data by using the interface above. An alternative is to run the command <code>View(penguins_raw)</code> or click on the object in RStudio’s environment panel (in the top-right section).</p>
<p>Let’s review the dataset’s columns:</p>
<ul>
<li><code>studyName</code>: Sampling expedition from which data were collected, generated, etc.<br>
</li>
<li><code>Sample Number</code>: an integer denoting the continuous numbering sequence for each sample</li>
<li><code>Species</code>: a character string denoting the penguin species<br>
</li>
<li><code>Region</code>: a character string denoting the region of Palmer LTER sampling grid<br>
</li>
<li><code>Island</code>: a character string denoting the island near Palmer Station where samples were collected<br>
</li>
<li><code>Stage</code>: a character string denoting reproductive stage at sampling<br>
</li>
<li><code>Individual ID</code>: a character string denoting the unique ID for each individual in dataset<br>
</li>
<li><code>Clutch Completion</code>: a character string denoting if the study nest observed with a full clutch, i.e., 2 eggs<br>
</li>
<li><code>Date Egg</code>: a date denoting the date study nest observed with 1 egg (sampled)</li>
<li><code>Culmen Length</code>: a number denoting the length of the dorsal ridge of a bird’s bill (millimeters)<br>
</li>
<li><code>Culmen Depth</code>: a number denoting the depth of the dorsal ridge of a bird’s bill (millimeters)<br>
</li>
<li><code>Flipper Length</code>: an integer denoting the length penguin flipper (millimeters)<br>
</li>
<li><code>Body Mass</code>: an integer denoting the penguin body mass (grams)<br>
</li>
<li><code>Sex</code>: a character string denoting the sex of an animal<br>
</li>
<li><code>Delta 15 N</code>: a number denoting the measure of the ratio of stable isotopes 15N:14N<br>
</li>
<li><code>Delta 13 C</code>: a number denoting the measure of the ratio of stable isotopes 13C:12C<br>
</li>
<li><code>Comments</code>: a character string with text providing additional relevant information for data</li>
</ul>
<p>You can read more about these variables by querying <code>?penguins_raw</code> and reading the <strong>Help</strong> documentation.</p>
<p>The <code>tidyverse</code> facilitates the creation and use of <em>tidy data</em>. If you can get your data to this format (and we will see ways to do this), your life will be much easier:</p>
<p><img src="fig/tidy_data.jpg" class="img-fluid"> <img src="fig/tidy_data2.jpg" class="img-fluid"></p>
<p>Source: Illustrations from the <a href="https://www.openscapes.org/">Openscapes</a> blog <a href="https://www.openscapes.org/blog/2020/10/12/tidy-data/"><em>Tidy Data for reproducibility, efficiency, and collaboration</em></a> by Julia Lowndes and Allison Horst.</p>
</section>
<section id="wrangling-data-with-dplyr" class="level1">
<h1>Wrangling data with <code>dplyr</code></h1>
<p>We often need to modify data to conduct our analyses, e.g., creating columns, filtering rows, etc. In the <code>tidyverse</code>, these operations are conducted with multiple <em>verbs</em>, which we will review now.</p>
<section id="selecting-columns" class="level2">
<h2 class="anchored" data-anchor-id="selecting-columns">Selecting columns</h2>
<p>We can select specific columns in our dataset with the <code>select()</code> function. All <code>dplyr</code> wrangling verbs take a data frame as their first argument—in this case, the columns we want to select are the other arguments.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(penguins_raw, Species, Island, <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   Species                             Island    `Individual ID`
   &lt;chr&gt;                               &lt;chr&gt;     &lt;chr&gt;          
 1 Adelie Penguin (Pygoscelis adeliae) Torgersen N1A1           
 2 Adelie Penguin (Pygoscelis adeliae) Torgersen N1A2           
 3 Adelie Penguin (Pygoscelis adeliae) Torgersen N2A1           
 4 Adelie Penguin (Pygoscelis adeliae) Torgersen N2A2           
 5 Adelie Penguin (Pygoscelis adeliae) Torgersen N3A1           
 6 Adelie Penguin (Pygoscelis adeliae) Torgersen N3A2           
 7 Adelie Penguin (Pygoscelis adeliae) Torgersen N4A1           
 8 Adelie Penguin (Pygoscelis adeliae) Torgersen N4A2           
 9 Adelie Penguin (Pygoscelis adeliae) Torgersen N5A1           
10 Adelie Penguin (Pygoscelis adeliae) Torgersen N5A2           
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>This is a good moment to talk about “pipes.” Notice how the code below produces the same output as the one above, but with a slightly different syntax. Pipes (<code>|&gt;</code> or <code>%&gt;%</code>) “kick” the object on the left of the pipe to the first argument of the function on the right. One can read pipes as “then,” so the code below can be read as “take <code>penguins_raw</code>, then select the columns <code>Species</code>, <code>Island</code> and <code>Individual ID</code>.” Pipes are very powerful and can be used to <em>link multiple operations</em>, as we will see in a moment.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, Island, <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   Species                             Island    `Individual ID`
   &lt;chr&gt;                               &lt;chr&gt;     &lt;chr&gt;          
 1 Adelie Penguin (Pygoscelis adeliae) Torgersen N1A1           
 2 Adelie Penguin (Pygoscelis adeliae) Torgersen N1A2           
 3 Adelie Penguin (Pygoscelis adeliae) Torgersen N2A1           
 4 Adelie Penguin (Pygoscelis adeliae) Torgersen N2A2           
 5 Adelie Penguin (Pygoscelis adeliae) Torgersen N3A1           
 6 Adelie Penguin (Pygoscelis adeliae) Torgersen N3A2           
 7 Adelie Penguin (Pygoscelis adeliae) Torgersen N4A1           
 8 Adelie Penguin (Pygoscelis adeliae) Torgersen N4A2           
 9 Adelie Penguin (Pygoscelis adeliae) Torgersen N5A1           
10 Adelie Penguin (Pygoscelis adeliae) Torgersen N5A2           
# ℹ 334 more rows</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>You can insert a pipe with the <code>Cmd/Ctrl + Shift + M</code> shortcut. If you have not changed the default RStudio settings, an “old” pipe (<code>%&gt;%</code>) might appear. While most of the functionality is the same, the <code>|&gt;</code> “new” pipes are more readable and don’t need any extra packages (to use <code>%&gt;%</code> you need the <code>tidyverse</code> or one of its packages). You can change this RStudio option in <code>Tools &gt; Global Options &gt; Code &gt; Use native pipe operator</code>.</p>
</div>
</div>
<p>Going back to selecting columns, you can select ranges:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species<span class="sc">:</span><span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species                             Region Island    Stage    `Individual ID`
   &lt;chr&gt;                               &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;          
 1 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N1A1           
 2 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N1A2           
 3 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N2A1           
 4 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N2A2           
 5 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N3A1           
 6 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N3A2           
 7 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N4A1           
 8 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N4A2           
 9 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N5A1           
10 Adelie Penguin (Pygoscelis adeliae) Anvers Torgersen Adult, … N5A2           
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>You can also <strong>de</strong>select columns using a minus sign:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 16
   studyName `Sample Number` Region Island    Stage              `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;              &lt;chr&gt;          
 1 PAL0708                 1 Anvers Torgersen Adult, 1 Egg Stage N1A1           
 2 PAL0708                 2 Anvers Torgersen Adult, 1 Egg Stage N1A2           
 3 PAL0708                 3 Anvers Torgersen Adult, 1 Egg Stage N2A1           
 4 PAL0708                 4 Anvers Torgersen Adult, 1 Egg Stage N2A2           
 5 PAL0708                 5 Anvers Torgersen Adult, 1 Egg Stage N3A1           
 6 PAL0708                 6 Anvers Torgersen Adult, 1 Egg Stage N3A2           
 7 PAL0708                 7 Anvers Torgersen Adult, 1 Egg Stage N4A1           
 8 PAL0708                 8 Anvers Torgersen Adult, 1 Egg Stage N4A2           
 9 PAL0708                 9 Anvers Torgersen Adult, 1 Egg Stage N5A1           
10 PAL0708                10 Anvers Torgersen Adult, 1 Egg Stage N5A2           
# ℹ 334 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>And use a few helper functions, like <code>matches()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, <span class="fu">matches</span>(<span class="st">"Length"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   Species                            `Culmen Length (mm)` `Flipper Length (mm)`
   &lt;chr&gt;                                             &lt;dbl&gt;                 &lt;dbl&gt;
 1 Adelie Penguin (Pygoscelis adelia…                 39.1                   181
 2 Adelie Penguin (Pygoscelis adelia…                 39.5                   186
 3 Adelie Penguin (Pygoscelis adelia…                 40.3                   195
 4 Adelie Penguin (Pygoscelis adelia…                 NA                      NA
 5 Adelie Penguin (Pygoscelis adelia…                 36.7                   193
 6 Adelie Penguin (Pygoscelis adelia…                 39.3                   190
 7 Adelie Penguin (Pygoscelis adelia…                 38.9                   181
 8 Adelie Penguin (Pygoscelis adelia…                 39.2                   195
 9 Adelie Penguin (Pygoscelis adelia…                 34.1                   193
10 Adelie Penguin (Pygoscelis adelia…                 42                     190
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>Or <code>everything()</code>, which we usually use to reorder columns:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, <span class="fu">everything</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 17
   Species         studyName `Sample Number` Region Island Stage `Individual ID`
   &lt;chr&gt;           &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 Adelie Penguin… PAL0708                 1 Anvers Torge… Adul… N1A1           
 2 Adelie Penguin… PAL0708                 2 Anvers Torge… Adul… N1A2           
 3 Adelie Penguin… PAL0708                 3 Anvers Torge… Adul… N2A1           
 4 Adelie Penguin… PAL0708                 4 Anvers Torge… Adul… N2A2           
 5 Adelie Penguin… PAL0708                 5 Anvers Torge… Adul… N3A1           
 6 Adelie Penguin… PAL0708                 6 Anvers Torge… Adul… N3A2           
 7 Adelie Penguin… PAL0708                 7 Anvers Torge… Adul… N4A1           
 8 Adelie Penguin… PAL0708                 8 Anvers Torge… Adul… N4A2           
 9 Adelie Penguin… PAL0708                 9 Anvers Torge… Adul… N5A1           
10 Adelie Penguin… PAL0708                10 Anvers Torge… Adul… N5A2           
# ℹ 334 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Notice that all these commands have not edited our existent objects—they have just printed the requested outputs to the screen. In order to modify objects, you need to use the assignment operator (<code>&lt;-</code>). For example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>penguins_raw_reduced <span class="ot">&lt;-</span> penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, <span class="fu">matches</span>(<span class="st">"Length"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>penguins_raw_reduced</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 3
   Species                            `Culmen Length (mm)` `Flipper Length (mm)`
   &lt;chr&gt;                                             &lt;dbl&gt;                 &lt;dbl&gt;
 1 Adelie Penguin (Pygoscelis adelia…                 39.1                   181
 2 Adelie Penguin (Pygoscelis adelia…                 39.5                   186
 3 Adelie Penguin (Pygoscelis adelia…                 40.3                   195
 4 Adelie Penguin (Pygoscelis adelia…                 NA                      NA
 5 Adelie Penguin (Pygoscelis adelia…                 36.7                   193
 6 Adelie Penguin (Pygoscelis adelia…                 39.3                   190
 7 Adelie Penguin (Pygoscelis adelia…                 38.9                   181
 8 Adelie Penguin (Pygoscelis adelia…                 39.2                   195
 9 Adelie Penguin (Pygoscelis adelia…                 34.1                   193
10 Adelie Penguin (Pygoscelis adelia…                 42                     190
# ℹ 334 more rows</code></pre>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Select the variables <code>Species</code>, <code>Stage</code>, <code>Individual ID</code>, <code>Clutch Completion</code>, and <code>Date Egg</code> from the data frame.</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, Stage, <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>, <span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span>, <span class="st">`</span><span class="at">Date Egg</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species                  Stage `Individual ID` `Clutch Completion` `Date Egg`
   &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt;           &lt;chr&gt;               &lt;date&gt;    
 1 Adelie Penguin (Pygosce… Adul… N1A1            Yes                 2007-11-11
 2 Adelie Penguin (Pygosce… Adul… N1A2            Yes                 2007-11-11
 3 Adelie Penguin (Pygosce… Adul… N2A1            Yes                 2007-11-16
 4 Adelie Penguin (Pygosce… Adul… N2A2            Yes                 2007-11-16
 5 Adelie Penguin (Pygosce… Adul… N3A1            Yes                 2007-11-16
 6 Adelie Penguin (Pygosce… Adul… N3A2            Yes                 2007-11-16
 7 Adelie Penguin (Pygosce… Adul… N4A1            No                  2007-11-15
 8 Adelie Penguin (Pygosce… Adul… N4A2            No                  2007-11-15
 9 Adelie Penguin (Pygosce… Adul… N5A1            Yes                 2007-11-09
10 Adelie Penguin (Pygosce… Adul… N5A2            Yes                 2007-11-09
# ℹ 334 more rows</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="renaming-columns" class="level2">
<h2 class="anchored" data-anchor-id="renaming-columns">Renaming columns</h2>
<p>We can use the <code>rename()</code> function to rename columns, with the syntax <code>new_name = old_name</code>. This is especially useful for datasets like this one, where the column names are long, have spaces in them, or other special characters that require ` in order to call the column name. Here is an example of how we rename a column:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>, </span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 17
   studyName `Sample Number` Species                   Region Island Stage id   
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;                     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;
 1 PAL0708                 1 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N1A1 
 2 PAL0708                 2 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N1A2 
 3 PAL0708                 3 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N2A1 
 4 PAL0708                 4 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N2A2 
 5 PAL0708                 5 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N3A1 
 6 PAL0708                 6 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N3A2 
 7 PAL0708                 7 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N4A1 
 8 PAL0708                 8 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N4A2 
 9 PAL0708                 9 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N5A1 
10 PAL0708                10 Adelie Penguin (Pygoscel… Anvers Torge… Adul… N5A2 
# ℹ 334 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   flipper_length &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>This is a good occasion to show how pipes allow us to chain operations. How do we read the following code out loud? (Remember that pipes are read as “then”).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">id =</span> <span class="st">`</span><span class="at">Individual ID</span><span class="st">`</span>, </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   Species                             id    `Culmen Length (mm)` flipper_length
   &lt;chr&gt;                               &lt;chr&gt;                &lt;dbl&gt;          &lt;dbl&gt;
 1 Adelie Penguin (Pygoscelis adeliae) N1A1                  39.1            181
 2 Adelie Penguin (Pygoscelis adeliae) N1A2                  39.5            186
 3 Adelie Penguin (Pygoscelis adeliae) N2A1                  40.3            195
 4 Adelie Penguin (Pygoscelis adeliae) N2A2                  NA               NA
 5 Adelie Penguin (Pygoscelis adeliae) N3A1                  36.7            193
 6 Adelie Penguin (Pygoscelis adeliae) N3A2                  39.3            190
 7 Adelie Penguin (Pygoscelis adeliae) N4A1                  38.9            181
 8 Adelie Penguin (Pygoscelis adeliae) N4A2                  39.2            195
 9 Adelie Penguin (Pygoscelis adeliae) N5A1                  34.1            193
10 Adelie Penguin (Pygoscelis adeliae) N5A2                  42              190
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="creating-columns" class="level2">
<h2 class="anchored" data-anchor-id="creating-columns">Creating columns</h2>
<p>It is common to want to create columns based on existing ones. We can use <code>mutate()</code> to do so. For example, we could want to express the main length variables (length of the penguin’s flipper and <em>culmen</em>, the dorsal ridge of their bill) in <strong>centimeters</strong> instead of <strong>millimeters</strong>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Species, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="co">#mutate length variables</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_length_cm =</span> flipper_length <span class="sc">*</span> <span class="fl">0.1</span>,</span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">culmen_length_cm =</span> <span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span> <span class="sc">*</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species                 `Culmen Length (mm)` flipper_length flipper_length_cm
   &lt;chr&gt;                                  &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;
 1 Adelie Penguin (Pygosc…                 39.1            181              18.1
 2 Adelie Penguin (Pygosc…                 39.5            186              18.6
 3 Adelie Penguin (Pygosc…                 40.3            195              19.5
 4 Adelie Penguin (Pygosc…                 NA               NA              NA  
 5 Adelie Penguin (Pygosc…                 36.7            193              19.3
 6 Adelie Penguin (Pygosc…                 39.3            190              19  
 7 Adelie Penguin (Pygosc…                 38.9            181              18.1
 8 Adelie Penguin (Pygosc…                 39.2            195              19.5
 9 Adelie Penguin (Pygosc…                 34.1            193              19.3
10 Adelie Penguin (Pygosc…                 42              190              19  
# ℹ 334 more rows
# ℹ 1 more variable: culmen_length_cm &lt;dbl&gt;</code></pre>
</div>
</div>
<p>We can also use multiple columns for creating a new one. For example, let’s calculate the flipper to culmen length ratio:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species,  <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_culmen_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Culmen Length (mm)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 4
   Species              `Culmen Length (mm)` flipper_length flipper_culmen_ratio
   &lt;chr&gt;                               &lt;dbl&gt;          &lt;dbl&gt;                &lt;dbl&gt;
 1 Adelie Penguin (Pyg…                 39.1            181                 4.63
 2 Adelie Penguin (Pyg…                 39.5            186                 4.71
 3 Adelie Penguin (Pyg…                 40.3            195                 4.84
 4 Adelie Penguin (Pyg…                 NA               NA                NA   
 5 Adelie Penguin (Pyg…                 36.7            193                 5.26
 6 Adelie Penguin (Pyg…                 39.3            190                 4.83
 7 Adelie Penguin (Pyg…                 38.9            181                 4.65
 8 Adelie Penguin (Pyg…                 39.2            195                 4.97
 9 Adelie Penguin (Pyg…                 34.1            193                 5.66
10 Adelie Penguin (Pyg…                 42              190                 4.52
# ℹ 334 more rows</code></pre>
</div>
</div>
</section>
<section id="filtering-rows" class="level2">
<h2 class="anchored" data-anchor-id="filtering-rows">Filtering rows</h2>
<p>Another common operation is to filter rows based on logical conditions. We can do so with the <code>filter()</code> function. For example, we can filter to only get penguins of a certain species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Species <span class="sc">==</span> <span class="st">"Gentoo penguin (Pygoscelis papua)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 124 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                 1 Gentoo penguin… Anvers Biscoe Adul… N31A1          
 2 PAL0708                 2 Gentoo penguin… Anvers Biscoe Adul… N31A2          
 3 PAL0708                 3 Gentoo penguin… Anvers Biscoe Adul… N32A1          
 4 PAL0708                 4 Gentoo penguin… Anvers Biscoe Adul… N32A2          
 5 PAL0708                 5 Gentoo penguin… Anvers Biscoe Adul… N33A1          
 6 PAL0708                 6 Gentoo penguin… Anvers Biscoe Adul… N33A2          
 7 PAL0708                 7 Gentoo penguin… Anvers Biscoe Adul… N34A1          
 8 PAL0708                 8 Gentoo penguin… Anvers Biscoe Adul… N34A2          
 9 PAL0708                 9 Gentoo penguin… Anvers Biscoe Adul… N35A1          
10 PAL0708                10 Gentoo penguin… Anvers Biscoe Adul… N35A2          
# ℹ 114 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>Notice that <code>==</code> here is a <em>logical operator</em>, read as “is equal to.” So our full chain of operations says the following: take <code>penguins_raw</code>, then filter it to get rows where the Species is equal to “Gentoo penguin (Pygoscelis papua)”.</p>
<p>There are other logical operators, also called <strong>boolean</strong> operators:</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Logical operator</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>==</code></td>
<td>“is equal to”</td>
</tr>
<tr class="even">
<td><code>!=</code></td>
<td>“is not equal to”</td>
</tr>
<tr class="odd">
<td><code>&gt;</code></td>
<td>“is greater than”</td>
</tr>
<tr class="even">
<td><code>&lt;</code></td>
<td>“is less than”</td>
</tr>
<tr class="odd">
<td><code>&gt;=</code></td>
<td>“is greater than or equal to”</td>
</tr>
<tr class="even">
<td><code>&lt;=</code></td>
<td>“is less than or equal to”</td>
</tr>
<tr class="odd">
<td><code>%in%</code></td>
<td>“is contained in”</td>
</tr>
<tr class="even">
<td><code>&amp;</code></td>
<td>“and” (intersection)</td>
</tr>
<tr class="odd">
<td><code>|</code></td>
<td>“or” (union)</td>
</tr>
</tbody>
</table>
<p>Let’s see a couple of other examples.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Island <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Torgersen"</span>, <span class="st">"Biscoe"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 220 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                 1 Adelie Penguin… Anvers Torge… Adul… N1A1           
 2 PAL0708                 2 Adelie Penguin… Anvers Torge… Adul… N1A2           
 3 PAL0708                 3 Adelie Penguin… Anvers Torge… Adul… N2A1           
 4 PAL0708                 4 Adelie Penguin… Anvers Torge… Adul… N2A2           
 5 PAL0708                 5 Adelie Penguin… Anvers Torge… Adul… N3A1           
 6 PAL0708                 6 Adelie Penguin… Anvers Torge… Adul… N3A2           
 7 PAL0708                 7 Adelie Penguin… Anvers Torge… Adul… N4A1           
 8 PAL0708                 8 Adelie Penguin… Anvers Torge… Adul… N4A2           
 9 PAL0708                 9 Adelie Penguin… Anvers Torge… Adul… N5A1           
10 PAL0708                10 Adelie Penguin… Anvers Torge… Adul… N5A2           
# ℹ 210 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Island <span class="sc">==</span> <span class="st">"Torgersen"</span> <span class="sc">&amp;</span> Sex <span class="sc">==</span> <span class="st">"MALE"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 23 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                 1 Adelie Penguin… Anvers Torge… Adul… N1A1           
 2 PAL0708                 6 Adelie Penguin… Anvers Torge… Adul… N3A2           
 3 PAL0708                 8 Adelie Penguin… Anvers Torge… Adul… N4A2           
 4 PAL0708                14 Adelie Penguin… Anvers Torge… Adul… N7A2           
 5 PAL0708                15 Adelie Penguin… Anvers Torge… Adul… N8A1           
 6 PAL0708                18 Adelie Penguin… Anvers Torge… Adul… N9A2           
 7 PAL0708                20 Adelie Penguin… Anvers Torge… Adul… N10A2          
 8 PAL0809                70 Adelie Penguin… Anvers Torge… Adul… N32A2          
 9 PAL0809                72 Adelie Penguin… Anvers Torge… Adul… N34A2          
10 PAL0809                74 Adelie Penguin… Anvers Torge… Adul… N35A2          
# ℹ 13 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">200</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 148 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0809                91 Adelie Penguin… Anvers Dream  Adul… N45A1          
 2 PAL0809                92 Adelie Penguin… Anvers Dream  Adul… N45A2          
 3 PAL0809                96 Adelie Penguin… Anvers Dream  Adul… N48A2          
 4 PAL0910               102 Adelie Penguin… Anvers Biscoe Adul… N47A2          
 5 PAL0910               124 Adelie Penguin… Anvers Torge… Adul… N67A2          
 6 PAL0910               130 Adelie Penguin… Anvers Torge… Adul… N72A2          
 7 PAL0910               152 Adelie Penguin… Anvers Dream  Adul… N85A2          
 8 PAL0708                 1 Gentoo penguin… Anvers Biscoe Adul… N31A1          
 9 PAL0708                 2 Gentoo penguin… Anvers Biscoe Adul… N31A2          
10 PAL0708                 3 Gentoo penguin… Anvers Biscoe Adul… N32A1          
# ℹ 138 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Confused about when to use <code>filter()</code> and when to use <code>select()</code>? You use <code>filter()</code> to select <em>rows</em> (i.e., specific observations) with specific attributes, and you use <code>select()</code> to select <em>columns</em> (i.e., specific variables). To help keep it straight, remember that the letter <strong>“c”</strong> for column is in <code>select()</code> and the letter <strong>“r”</strong> for row is in <code>filter()</code>.</p>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Add a new column to the data frame, called <code>length_mass_ratio</code>, which calculates the ratio of the penguin’s flipper length <code>Flipper Length (mm)</code> and their body mass <code>Body Mass (g)</code>. How would you calculate <code>length_cm_mass_ratio</code>, where the flipper length is expressed as centimeters instead of millimeters?</li>
</ol>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-7-contents" aria-controls="callout-7" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-7" class="callout-7-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>To calculate <code>length_mass_ratio</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Length to mass ratio:</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_mass_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species `Body Mass (g)` `Culmen Length (mm)` flipper_length length_mass_ratio
   &lt;chr&gt;             &lt;dbl&gt;                &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;
 1 Adelie…            3750                 39.1            181            0.0483
 2 Adelie…            3800                 39.5            186            0.0489
 3 Adelie…            3250                 40.3            195            0.06  
 4 Adelie…              NA                 NA               NA           NA     
 5 Adelie…            3450                 36.7            193            0.0559
 6 Adelie…            3650                 39.3            190            0.0521
 7 Adelie…            3625                 38.9            181            0.0499
 8 Adelie…            4675                 39.2            195            0.0417
 9 Adelie…            3475                 34.1            193            0.0555
10 Adelie…            4250                 42              190            0.0447
# ℹ 334 more rows</code></pre>
</div>
</div>
<p>There are two ways to calculate <code>length_cm_mass_ratio</code> in centimeters, you could either generate a new length variable in centimeters, or just apply the unit transformation to the ratio equation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_cm =</span> flipper_length <span class="sc">*</span> <span class="fl">0.1</span>, </span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">length_cm_mass_ratio =</span> flipper_cm<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 6
   Species        `Body Mass (g)` `Culmen Length (mm)` flipper_length flipper_cm
   &lt;chr&gt;                    &lt;dbl&gt;                &lt;dbl&gt;          &lt;dbl&gt;      &lt;dbl&gt;
 1 Adelie Pengui…            3750                 39.1            181       18.1
 2 Adelie Pengui…            3800                 39.5            186       18.6
 3 Adelie Pengui…            3250                 40.3            195       19.5
 4 Adelie Pengui…              NA                 NA               NA       NA  
 5 Adelie Pengui…            3450                 36.7            193       19.3
 6 Adelie Pengui…            3650                 39.3            190       19  
 7 Adelie Pengui…            3625                 38.9            181       18.1
 8 Adelie Pengui…            4675                 39.2            195       19.5
 9 Adelie Pengui…            3475                 34.1            193       19.3
10 Adelie Pengui…            4250                 42              190       19  
# ℹ 334 more rows
# ℹ 1 more variable: length_cm_mass_ratio &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_cm_mass_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span> <span class="sc">*</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species                   `Body Mass (g)` `Culmen Length (mm)` flipper_length
   &lt;chr&gt;                               &lt;dbl&gt;                &lt;dbl&gt;          &lt;dbl&gt;
 1 Adelie Penguin (Pygoscel…            3750                 39.1            181
 2 Adelie Penguin (Pygoscel…            3800                 39.5            186
 3 Adelie Penguin (Pygoscel…            3250                 40.3            195
 4 Adelie Penguin (Pygoscel…              NA                 NA               NA
 5 Adelie Penguin (Pygoscel…            3450                 36.7            193
 6 Adelie Penguin (Pygoscel…            3650                 39.3            190
 7 Adelie Penguin (Pygoscel…            3625                 38.9            181
 8 Adelie Penguin (Pygoscel…            4675                 39.2            195
 9 Adelie Penguin (Pygoscel…            3475                 34.1            193
10 Adelie Penguin (Pygoscel…            4250                 42              190
# ℹ 334 more rows
# ℹ 1 more variable: length_cm_mass_ratio &lt;dbl&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Filter the data frame to only get penguins with nests observed with a fully completed clutch.</li>
</ol>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-8-contents" aria-controls="callout-8" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-8" class="callout-8-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Yes"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 308 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                 1 Adelie Penguin… Anvers Torge… Adul… N1A1           
 2 PAL0708                 2 Adelie Penguin… Anvers Torge… Adul… N1A2           
 3 PAL0708                 3 Adelie Penguin… Anvers Torge… Adul… N2A1           
 4 PAL0708                 4 Adelie Penguin… Anvers Torge… Adul… N2A2           
 5 PAL0708                 5 Adelie Penguin… Anvers Torge… Adul… N3A1           
 6 PAL0708                 6 Adelie Penguin… Anvers Torge… Adul… N3A2           
 7 PAL0708                 9 Adelie Penguin… Anvers Torge… Adul… N5A1           
 8 PAL0708                10 Adelie Penguin… Anvers Torge… Adul… N5A2           
 9 PAL0708                11 Adelie Penguin… Anvers Torge… Adul… N6A1           
10 PAL0708                12 Adelie Penguin… Anvers Torge… Adul… N6A2           
# ℹ 298 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="3" type="1">
<li>Filter the data frame to only get penguins with nests observed with a fully completed clutch on the Island of Torgersen.</li>
</ol>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Yes"</span> <span class="sc">&amp;</span> Island <span class="sc">==</span> <span class="st">"Torgersen"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 44 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                 1 Adelie Penguin… Anvers Torge… Adul… N1A1           
 2 PAL0708                 2 Adelie Penguin… Anvers Torge… Adul… N1A2           
 3 PAL0708                 3 Adelie Penguin… Anvers Torge… Adul… N2A1           
 4 PAL0708                 4 Adelie Penguin… Anvers Torge… Adul… N2A2           
 5 PAL0708                 5 Adelie Penguin… Anvers Torge… Adul… N3A1           
 6 PAL0708                 6 Adelie Penguin… Anvers Torge… Adul… N3A2           
 7 PAL0708                 9 Adelie Penguin… Anvers Torge… Adul… N5A1           
 8 PAL0708                10 Adelie Penguin… Anvers Torge… Adul… N5A2           
 9 PAL0708                11 Adelie Penguin… Anvers Torge… Adul… N6A1           
10 PAL0708                12 Adelie Penguin… Anvers Torge… Adul… N6A2           
# ℹ 34 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="ordering-rows" class="level2">
<h2 class="anchored" data-anchor-id="ordering-rows">Ordering rows</h2>
<p>The <code>arrange()</code> function allows us to order rows according to values. The default arranges from smallest to largest if numeric, or from A to Z if a character. For example, let’s order based on the <code>Body Mass (g)</code> variable:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0809                39 Chinstrap peng… Anvers Dream  Adul… N72A1          
 2 PAL0809                59 Adelie Penguin… Anvers Biscoe Adul… N25A1          
 3 PAL0809                65 Adelie Penguin… Anvers Biscoe Adul… N29A1          
 4 PAL0809                55 Adelie Penguin… Anvers Biscoe Adul… N23A1          
 5 PAL0809                99 Adelie Penguin… Anvers Dream  Adul… N50A1          
 6 PAL0910               117 Adelie Penguin… Anvers Torge… Adul… N63A1          
 7 PAL0708                23 Chinstrap peng… Anvers Dream  Adul… N85A1          
 8 PAL0910               105 Adelie Penguin… Anvers Biscoe Adul… N51A1          
 9 PAL0708                48 Adelie Penguin… Anvers Dream  Adul… N29A2          
10 PAL0708                45 Adelie Penguin… Anvers Dream  Adul… N28A1          
# ℹ 334 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>Maybe we only want penguins from the island of Biscoe. Remember that we can chain operations:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Island <span class="sc">==</span> <span class="st">"Biscoe"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0809                59 Adelie Penguin… Anvers Biscoe Adul… N25A1          
 2 PAL0809                65 Adelie Penguin… Anvers Biscoe Adul… N29A1          
 3 PAL0809                55 Adelie Penguin… Anvers Biscoe Adul… N23A1          
 4 PAL0910               105 Adelie Penguin… Anvers Biscoe Adul… N51A1          
 5 PAL0910               103 Adelie Penguin… Anvers Biscoe Adul… N49A1          
 6 PAL0708                29 Adelie Penguin… Anvers Biscoe Adul… N18A1          
 7 PAL0809                61 Adelie Penguin… Anvers Biscoe Adul… N27A1          
 8 PAL0910               109 Adelie Penguin… Anvers Biscoe Adul… N55A1          
 9 PAL0708                28 Adelie Penguin… Anvers Biscoe Adul… N17A2          
10 PAL0910               113 Adelie Penguin… Anvers Biscoe Adul… N60A1          
# ℹ 158 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>By default, <code>arrange()</code> uses increasing order (like <code>sort()</code>). To use decreasing order, add a minus sign:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Island <span class="sc">==</span> <span class="st">"Biscoe"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="sc">-</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0708                18 Gentoo penguin… Anvers Biscoe Adul… N39A2          
 2 PAL0708                34 Gentoo penguin… Anvers Biscoe Adul… N56A2          
 3 PAL0809                78 Gentoo penguin… Anvers Biscoe Adul… N58A2          
 4 PAL0910               118 Gentoo penguin… Anvers Biscoe Adul… N36A2          
 5 PAL0809                80 Gentoo penguin… Anvers Biscoe Adul… N60A2          
 6 PAL0910               112 Gentoo penguin… Anvers Biscoe Adul… N32A2          
 7 PAL0708                14 Gentoo penguin… Anvers Biscoe Adul… N37A2          
 8 PAL0708                16 Gentoo penguin… Anvers Biscoe Adul… N38A2          
 9 PAL0910               116 Gentoo penguin… Anvers Biscoe Adul… N35A2          
10 PAL0809                68 Gentoo penguin… Anvers Biscoe Adul… N51A2          
# ℹ 158 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>You can also order rows by more than one variable. What this does is to order by the first variable, and resolve any ties by ordering by the second variable (and so forth if you have more than two ordering variables). For example, let’s first order our data frame by sex, and then within sex order by body mass:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Island <span class="sc">==</span> <span class="st">"Biscoe"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Sex, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 168 × 17
   studyName `Sample Number` Species         Region Island Stage `Individual ID`
   &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
 1 PAL0809                59 Adelie Penguin… Anvers Biscoe Adul… N25A1          
 2 PAL0809                65 Adelie Penguin… Anvers Biscoe Adul… N29A1          
 3 PAL0809                55 Adelie Penguin… Anvers Biscoe Adul… N23A1          
 4 PAL0910               105 Adelie Penguin… Anvers Biscoe Adul… N51A1          
 5 PAL0910               103 Adelie Penguin… Anvers Biscoe Adul… N49A1          
 6 PAL0708                29 Adelie Penguin… Anvers Biscoe Adul… N18A1          
 7 PAL0809                61 Adelie Penguin… Anvers Biscoe Adul… N27A1          
 8 PAL0910               109 Adelie Penguin… Anvers Biscoe Adul… N55A1          
 9 PAL0708                28 Adelie Penguin… Anvers Biscoe Adul… N17A2          
10 PAL0910               113 Adelie Penguin… Anvers Biscoe Adul… N60A1          
# ℹ 158 more rows
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Arrange the data by <code>length_mass_ratio</code>, the ratio of the penguin’s flipper length (in mm) and the penguin’s body mass (in g). (You should have code on how to create this variable from the last exercise). Save this as an object called `penguins_ratio_data</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_mass_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(length_mass_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 344 × 5
   Species `Body Mass (g)` `Culmen Length (mm)` flipper_length length_mass_ratio
   &lt;chr&gt;             &lt;dbl&gt;                &lt;dbl&gt;          &lt;dbl&gt;             &lt;dbl&gt;
 1 Gentoo…            6300                 49.2            221            0.0351
 2 Gentoo…            5850                 48.4            213            0.0364
 3 Gentoo…            6000                 51.1            220            0.0367
 4 Gentoo…            6000                 48.8            222            0.037 
 5 Gentoo…            5850                 49.3            217            0.0371
 6 Gentoo…            5950                 45.2            223            0.0375
 7 Gentoo…            5500                 48.1            209            0.038 
 8 Gentoo…            6050                 59.6            230            0.0380
 9 Gentoo…            5650                 47.8            215            0.0381
10 Gentoo…            5700                 50              218            0.0382
# ℹ 334 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="do">## Now save it as an object </span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>penguins_ratio_data <span class="ot">&lt;-</span> penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_mass_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(length_mass_ratio)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="summarizing-data" class="level1">
<h1>Summarizing data</h1>
<section id="calculating-summary-statistics" class="level2">
<h2 class="anchored" data-anchor-id="calculating-summary-statistics">Calculating summary statistics</h2>
<p><code>dplyr</code> makes summarizing data a breeze using the <code>summarize()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>),</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_body_mass =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_flipper_length mean_body_mass
                &lt;dbl&gt;          &lt;dbl&gt;
1                  NA             NA</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Oh no! If you want to calculate the mean or do another arithmatic operation on a numeric vector and R returns <code>NA</code> values, it likely means that the vector has missing values. Use <code>na.rm = T</code> to drop the <code>NA</code> values in your calculation. We’ll see more of this later in this lesson.</p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mean_body_mass =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  mean_flipper_length mean_body_mass
                &lt;dbl&gt;          &lt;dbl&gt;
1                201.          4202.</code></pre>
</div>
</div>
<p>To make summaries, we can use any function that takes a vector and returns one value. Another example:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span> <span class="co"># to filter out penguins that did not have an (observed) full nest </span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">max_flipper_length =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_flipper_length =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 2
  max_flipper_length min_flipper_length
               &lt;dbl&gt;              &lt;dbl&gt;
1                231                174</code></pre>
</div>
</div>
<p><em>Grouped summaries</em> allow us to disaggregate summaries according to other variables (usually categorical):</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span> <span class="co"># to filter out penguins that did not have an (observed) full nest </span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">max_flipper_length =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_flipper_length =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> Sex)  <span class="co">#  to group by sex </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Sex    max_flipper_length min_flipper_length
  &lt;chr&gt;               &lt;dbl&gt;              &lt;dbl&gt;
1 MALE                  231                178
2 FEMALE                222                174
3 &lt;NA&gt;                  217                179</code></pre>
</div>
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Clutch Completion</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">|&gt;</span> <span class="co"># to filter out penguins that did not have an (observed) full nest </span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">max_flipper_length =</span> <span class="fu">max</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_flipper_length =</span> <span class="fu">min</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> Sex) <span class="sc">|&gt;</span>  <span class="co">#  to group by sex </span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(Sex) <span class="sc">==</span> F) <span class="co"># to drop the penguins with an unknown sex </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
  Sex    max_flipper_length min_flipper_length
  &lt;chr&gt;               &lt;dbl&gt;              &lt;dbl&gt;
1 MALE                  231                178
2 FEMALE                222                174</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Obtain the maximum and minimum flipper length to mass ratio (call them <code>max_ratio</code> and <code>min_ratio</code>, drawing from the <code>length_mass_ratio</code> variable from before) for each penguin species.</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Species, <span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="fu">matches</span>(<span class="st">"Length"</span>)) <span class="sc">|&gt;</span> <span class="co"># select just for clarity</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">flipper_length =</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">length_mass_ratio =</span> flipper_length<span class="sc">/</span><span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">|&gt;</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># summarize flipper length to mass ratio by species</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">summarize</span>(<span class="at">max_ratio =</span> <span class="fu">max</span>(length_mass_ratio, <span class="at">na.rm =</span> T),</span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">min_ratio =</span> <span class="fu">min</span>(length_mass_ratio, <span class="at">na.rm =</span> T),</span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">.by =</span> Species)   <span class="co">#  to group by species </span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Species                                   max_ratio min_ratio
  &lt;chr&gt;                                         &lt;dbl&gt;     &lt;dbl&gt;
1 Adelie Penguin (Pygoscelis adeliae)          0.0660    0.0396
2 Gentoo penguin (Pygoscelis papua)            0.0527    0.0351
3 Chinstrap penguin (Pygoscelis antarctica)    0.0711    0.0438</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="recoding-variables" class="level2">
<h2 class="anchored" data-anchor-id="recoding-variables">Recoding variables</h2>
<p>Take a look at the <code>Species</code> variable. We can do a simple tabulation with <code>count()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  Species                                       n
  &lt;chr&gt;                                     &lt;int&gt;
1 Adelie Penguin (Pygoscelis adeliae)         152
2 Chinstrap penguin (Pygoscelis antarctica)    68
3 Gentoo penguin (Pygoscelis papua)           124</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Tip
</div>
</div>
<div class="callout-body-container callout-body">
<p>Another common way to compute quick tabulations in R is with the <code>table()</code> function. Be aware that this takes a <em>vector</em> as the input:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="fu">table</span>(penguins_raw<span class="sc">$</span>Species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
      Adelie Penguin (Pygoscelis adeliae) 
                                      152 
Chinstrap penguin (Pygoscelis antarctica) 
                                       68 
        Gentoo penguin (Pygoscelis papua) 
                                      124 </code></pre>
</div>
</div>
</div>
</div>
<p>We might want to recode this variable. For instance, if we are only interested in the Chinstrap penguins, we could create a <em>dummy</em>/<em>binary</em> variable for whether the penguin is a Chinstrap or not. We can do this with <code>if_else()</code>, which works with logical conditions:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the arguments are condition, true (what to do if true), false</span></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">chinstrap =</span> <span class="fu">if_else</span>(Species <span class="sc">==</span> <span class="st">"Chinstrap penguin (Pygoscelis antarctica)"</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(chinstrap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  chinstrap     n
      &lt;dbl&gt; &lt;int&gt;
1         0   276
2         1    68</code></pre>
</div>
</div>
<p>Instead of a numeric classification (0 and 1), we could use characters:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the arguments are condition, true (what to do if true), false</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">chinstrap =</span> <span class="fu">if_else</span>(Species <span class="sc">==</span> <span class="st">"Chinstrap penguin (Pygoscelis antarctica)"</span>, <span class="st">"Chinstrap"</span>, <span class="st">"Other"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(chinstrap)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  chinstrap     n
  &lt;chr&gt;     &lt;int&gt;
1 Chinstrap    68
2 Other       276</code></pre>
</div>
</div>
<p><code>if_else()</code> is great for binary recoding. But sometimes we want to create more than two categories. We can use <code>case_when()</code>. This time, say we just want to simplify the <code>Species</code> variable to the familiar names of the penguins, not their scientific names:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># syntax is condition ~ value</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(</span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Adelie Penguin (Pygoscelis adeliae)"</span> <span class="sc">~</span> <span class="st">"Adelie"</span>,</span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Chinstrap penguin (Pygoscelis antarctica)"</span> <span class="sc">~</span> <span class="st">"Chinstrap"</span>, </span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Gentoo penguin (Pygoscelis papua)"</span> <span class="sc">~</span> <span class="st">"Gentoo"</span>,</span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> <span class="st">"Other"</span> <span class="co"># what to do in all other cases</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 2
  species       n
  &lt;chr&gt;     &lt;int&gt;
1 Adelie      152
2 Chinstrap    68
3 Gentoo      124</code></pre>
</div>
</div>
<p>Save this as an object called <code>species_table</code>. We will use this later.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a>species_table <span class="ot">&lt;-</span> penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># syntax is condition ~ value</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(</span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Adelie Penguin (Pygoscelis adeliae)"</span> <span class="sc">~</span> <span class="st">"Adelie"</span>,</span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Chinstrap penguin (Pygoscelis antarctica)"</span> <span class="sc">~</span> <span class="st">"Chinstrap"</span>, </span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Gentoo penguin (Pygoscelis papua)"</span> <span class="sc">~</span> <span class="st">"Gentoo"</span>,</span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> <span class="st">"Other"</span> <span class="co"># what to do in all other cases</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The <code>.default =</code> argument in <code>case_when()</code> can also be used to leave the variable as-is for non-specified cases. For example, let’s combine Adelie and Gentoo species:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># syntax is condition ~ value</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">species =</span> <span class="fu">case_when</span>(</span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Adelie Penguin (Pygoscelis adeliae)"</span>, <span class="st">"Gentoo penguin (Pygoscelis papua)"</span>) <span class="sc">~</span> <span class="st">"Adelie/Gentoo"</span>,</span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    Species <span class="sc">==</span> <span class="st">"Chinstrap penguin (Pygoscelis antarctica)"</span> <span class="sc">~</span> <span class="st">"Chinstrap"</span>,  </span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.default =</span> <span class="st">"Other"</span> <span class="co"># what to do in all other cases</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(species)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 2
  species           n
  &lt;chr&gt;         &lt;int&gt;
1 Adelie/Gentoo   276
2 Chinstrap        68</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<ol type="1">
<li>Create a dummy variable, <code>large_flipper</code>, for whether the penguin has a flipper that is longer than 210mm. Then compute its mean.</li>
</ol>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the arguments are condition, true (what to do if true), false</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">large_flipper =</span> <span class="fu">if_else</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">210</span>, <span class="dv">1</span>, <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(large_flipper) <span class="sc">|&gt;</span></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">large_flipper_mean =</span> <span class="fu">mean</span>(large_flipper))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  large_flipper_mean
               &lt;dbl&gt;
1              0.292</code></pre>
</div>
</div>
</div>
</div>
</div>
<ol start="2" type="1">
<li>Say you want to get more specific and determine whether the flipper is small, medium, or large. Say a small flipper is 180mm or smaller, a medium-sized flipper ranges from 180 - 210mm, and a large flipper is longer than 210mm. Create the variable <code>flipper_size</code> that takes on the values <code>Small</code>, <code>Medium</code>, or <code>Large</code> depending on the length.</li>
</ol>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the arguments are condition, true (what to do if true), false</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">flipper_size =</span> <span class="fu">case_when</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&lt;=</span> <span class="dv">180</span> <span class="sc">~</span> <span class="st">"Small"</span>,</span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&gt;</span> <span class="dv">180</span> <span class="sc">&amp;</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&lt;</span> <span class="dv">210</span> <span class="sc">~</span> <span class="st">"Medium"</span>, </span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a>                                   <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">&gt;=</span> <span class="dv">210</span> <span class="sc">~</span> <span class="st">"Large"</span>,</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">.default =</span> <span class="st">"Other"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a>           <span class="fu">drop_na</span>(flipper_size) <span class="sc">|&gt;</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a>           <span class="fu">count</span>(flipper_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 2
  flipper_size     n
  &lt;chr&gt;        &lt;int&gt;
1 Large          114
2 Medium         215
3 Other            2
4 Small           13</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="missing-values" class="level2">
<h2 class="anchored" data-anchor-id="missing-values">Missing values</h2>
<p>Missing values are commonplace in real datasets. In R, missing values are a special type of value in vectors, denoted as <code>NA</code>.</p>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>The special value <code>NA</code> is different from the character value “NA”. For example, notice that a numeric vector can have <code>NAs</code>, while it obviously cannot hold the character value “NA”:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="dv">5</span>, <span class="fl">4.6</span>, <span class="cn">NA</span>, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.0 4.6  NA 8.0</code></pre>
</div>
</div>
</div>
</div>
<p>A quick way to check for missing values in small datasets is with the <code>summary()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(penguins_raw)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  studyName         Sample Number      Species             Region         
 Length:344         Min.   :  1.00   Length:344         Length:344        
 Class :character   1st Qu.: 29.00   Class :character   Class :character  
 Mode  :character   Median : 58.00   Mode  :character   Mode  :character  
                    Mean   : 63.15                                        
                    3rd Qu.: 95.25                                        
                    Max.   :152.00                                        
                                                                          
    Island             Stage           Individual ID      Clutch Completion 
 Length:344         Length:344         Length:344         Length:344        
 Class :character   Class :character   Class :character   Class :character  
 Mode  :character   Mode  :character   Mode  :character   Mode  :character  
                                                                            
                                                                            
                                                                            
                                                                            
    Date Egg          Culmen Length (mm) Culmen Depth (mm) Flipper Length (mm)
 Min.   :2007-11-09   Min.   :32.10      Min.   :13.10     Min.   :172.0      
 1st Qu.:2007-11-28   1st Qu.:39.23      1st Qu.:15.60     1st Qu.:190.0      
 Median :2008-11-09   Median :44.45      Median :17.30     Median :197.0      
 Mean   :2008-11-27   Mean   :43.92      Mean   :17.15     Mean   :200.9      
 3rd Qu.:2009-11-16   3rd Qu.:48.50      3rd Qu.:18.70     3rd Qu.:213.0      
 Max.   :2009-12-01   Max.   :59.60      Max.   :21.50     Max.   :231.0      
                      NA's   :2          NA's   :2         NA's   :2          
 Body Mass (g)      Sex            Delta 15 N (o/oo) Delta 13 C (o/oo)
 Min.   :2700   Length:344         Min.   : 7.632    Min.   :-27.02   
 1st Qu.:3550   Class :character   1st Qu.: 8.300    1st Qu.:-26.32   
 Median :4050   Mode  :character   Median : 8.652    Median :-25.83   
 Mean   :4202                      Mean   : 8.733    Mean   :-25.69   
 3rd Qu.:4750                      3rd Qu.: 9.172    3rd Qu.:-25.06   
 Max.   :6300                      Max.   :10.025    Max.   :-23.79   
 NA's   :2                         NA's   :14        NA's   :13       
   Comments        
 Length:344        
 Class :character  
 Mode  :character  
                   
                   
                   
                   </code></pre>
</div>
</div>
<p>Notice that we have missingness in the <code>Flipper Length (mm)</code> and <code>Body Mass (g)</code> variables, among others. We might want to filter the dataset to see which observations are in this situation:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span> <span class="sc">==</span> <span class="cn">NA</span> <span class="sc">|</span> <span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span> <span class="sc">==</span> <span class="cn">NA</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 0 × 17
# ℹ 17 variables: studyName &lt;chr&gt;, Sample Number &lt;dbl&gt;, Species &lt;chr&gt;,
#   Region &lt;chr&gt;, Island &lt;chr&gt;, Stage &lt;chr&gt;, Individual ID &lt;chr&gt;,
#   Clutch Completion &lt;chr&gt;, Date Egg &lt;date&gt;, Culmen Length (mm) &lt;dbl&gt;,
#   Culmen Depth (mm) &lt;dbl&gt;, Flipper Length (mm) &lt;dbl&gt;, Body Mass (g) &lt;dbl&gt;,
#   Sex &lt;chr&gt;, Delta 15 N (o/oo) &lt;dbl&gt;, Delta 13 C (o/oo) &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>But the code above doesn’t work! To refer to missing values in logical conditions, we cannot use <code>== NA</code>. Instead, we need to use the <code>is.na()</code> function:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">is.na</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>) <span class="sc">|</span> <span class="fu">is.na</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 17
  studyName `Sample Number` Species          Region Island Stage `Individual ID`
  &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;            &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt;          
1 PAL0708                 4 Adelie Penguin … Anvers Torge… Adul… N2A2           
2 PAL0910               120 Gentoo penguin … Anvers Biscoe Adul… N38A2          
# ℹ 10 more variables: `Clutch Completion` &lt;chr&gt;, `Date Egg` &lt;date&gt;,
#   `Culmen Length (mm)` &lt;dbl&gt;, `Culmen Depth (mm)` &lt;dbl&gt;,
#   `Flipper Length (mm)` &lt;dbl&gt;, `Body Mass (g)` &lt;dbl&gt;, Sex &lt;chr&gt;,
#   `Delta 15 N (o/oo)` &lt;dbl&gt;, `Delta 13 C (o/oo)` &lt;dbl&gt;, Comments &lt;chr&gt;</code></pre>
</div>
</div>
<p>As we saw earlier when trying to calculate the mean, in most R functions, missing values are “contagious.” This means that any missing value will contaminate the operation and carry over to the results. Recall:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_flipper_length
                &lt;dbl&gt;
1                  NA</code></pre>
</div>
</div>
<p>Sometimes we’d like to perform our operations even in the presence of missing values, simply excluding them. Most basic R functions have an <code>na.rm =</code> argument to do this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mean_flipper_length =</span> <span class="fu">mean</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 1
  mean_flipper_length
                &lt;dbl&gt;
1                201.</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculate the median value of the penguins’ flipper length and body mass for each Island (i.e., perform a grouped summary).</p>
<div class="callout callout-style-simple callout-caution no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-21-contents" aria-controls="callout-21" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Solution
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-21" class="callout-21-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a>penguins_raw <span class="sc">|&gt;</span> </span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">median_flipper_length =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Flipper Length (mm)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>              <span class="at">median_body_mass =</span> <span class="fu">median</span>(<span class="st">`</span><span class="at">Body Mass (g)</span><span class="st">`</span>, <span class="at">na.rm =</span> T),</span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>              <span class="at">.by =</span> Island)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 × 3
  Island    median_flipper_length median_body_mass
  &lt;chr&gt;                     &lt;dbl&gt;            &lt;dbl&gt;
1 Torgersen                   191            3700 
2 Biscoe                      214            4775 
3 Dream                       193            3688.</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="overview" class="level1">
<h1>Overview</h1>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>select()</code></td>
<td>Select columns</td>
</tr>
<tr class="even">
<td><code>rename()</code></td>
<td>Rename columns</td>
</tr>
<tr class="odd">
<td><code>mutate()</code></td>
<td>Creating columns</td>
</tr>
<tr class="even">
<td><code>filter()</code></td>
<td>Filtering rows</td>
</tr>
<tr class="odd">
<td><code>arrange()</code></td>
<td>Ordering rows</td>
</tr>
<tr class="even">
<td><code>summarize()</code></td>
<td>Summarizing data</td>
</tr>
<tr class="odd">
<td><code>summarize(…, .by = )</code></td>
<td>Summarizing data (by groups)</td>
</tr>
<tr class="even">
<td><code>if_else()</code></td>
<td>Recode to a binary variable</td>
</tr>
<tr class="odd">
<td><code>case_when()</code></td>
<td>Recode to a categorical variable</td>
</tr>
<tr class="even">
<td><code>is.na()</code>, <code>na.rm()</code>.</td>
<td>Identify and remove missing data</td>
</tr>
</tbody>
</table>
</section>
<section id="saving-and-exporting-cleaned-data" class="level1">
<h1>Saving and exporting cleaned data</h1>
<p>As in the <a href="../../lessons/r-lessons/r-plotting.html">plotting lesson</a>, you will often want to save or export your cleaned data. This is especially true if you are working on complex data cleaning tasks, and you will use your cleaned dataset for other scripts in the same project. You can save cleaned data in a variety of file formats: you can save them as data files (as .csv files, or as native R data files, with .rds or .rda file extensions) or export the tables for reports (for integration, as Microsoft Word documents, html tables, or as images).</p>
<p>We will practice one of each.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="do">## To export to a .csv </span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(penguins_ratio_data, <span class="at">file =</span> <span class="st">"penguins_ratio_data.csv"</span>)</span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="do">## To save as .rda file</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a><span class="fu">save</span>(penguins_ratio_data, species_table, <span class="at">file =</span> <span class="st">"penguins_cleaned.rda"</span>)</span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a><span class="do">## To make a table for export</span></span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(species_table, <span class="at">format =</span> <span class="st">"markdown"</span>, <span class="at">caption =</span> <span class="st">"N Penguins by Species"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">save_kable</span>(<span class="st">"species_table.pdf"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Your table will look like this:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="do">## To make a table for export</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(species_table, <span class="at">format =</span> <span class="st">"markdown"</span>, </span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">caption =</span> <span class="st">"N Penguins by Species"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<caption>N Penguins by Species</caption>
<thead>
<tr class="header">
<th style="text-align: left;">species</th>
<th style="text-align: right;">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Adelie</td>
<td style="text-align: right;">152</td>
</tr>
<tr class="even">
<td style="text-align: left;">Chinstrap</td>
<td style="text-align: right;">68</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Gentoo</td>
<td style="text-align: right;">124</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Now we’ll once again use the git tools within RStudio to commit these files and push them to our GitHub repository. Click on the “Git” tab in the top-right. Clicking this tab will show you all of the files that have been modified since we last committed. In this case, you should see your code file, your cleaned data for future use, and your table to export for a report. Click the boxes next to these three files to queue them for committing. Then click the <kbd>Commit</kbd> button. Write a succinct commit message in the window, then click the <kbd>Commit</kbd> button, then the <kbd>Push</kbd> button. And that’s that!</p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/SyracuseUniversity\.github\.io\/ospo-workshop-r-intro");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../../lessons/r-lessons/r-plotting.html" class="pagination-link" aria-label="Plotting in R with ggplot2">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Plotting in R with ggplot2</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">

      <a href="../../lessons/r-lessons/r-markdown.html" class="pagination-link" aria-label="Writing reports with R Markdown">
        <span class="nav-page-text">Writing reports with R Markdown</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>© Copyright 2024, <a href="https://opensource.syracuse.edu/">Syracuse University Open Source Program Office</a></p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/SyracuseUniversity/ospo-workshop-r-intro/issues/new" class="toc-action"><i class="bi bi-github"></i>Report an issue</a></li></ul></div></div>
    <div class="nav-footer-right">
<p>This page is built with ❤️ and <a href="https://quarto.org/">Quarto</a>.</p>
</div>
  </div>
</footer>




</body></html>